# ä»»åŠ¡ï¼šç¤ºä¾‹ä»£ç 

**ä¼˜å…ˆçº§**: ğŸŸ¢ P2 - ä¸­ä¼˜å…ˆçº§
**ç±»å‹**: æ–‡æ¡£å®Œæ•´
**é¢„ä¼°å·¥æ—¶**: 1 å¤©
**å½±å“èŒƒå›´**: docs/examples/

---

## é—®é¢˜æè¿°

é¡¹ç›®ç¼ºå°‘ä½¿ç”¨ç¤ºä¾‹ä»£ç ï¼Œæ–°ç”¨æˆ·éš¾ä»¥å¿«é€Ÿä¸Šæ‰‹ã€‚

---

## éœ€è¦çš„ç¤ºä¾‹

| ç¤ºä¾‹ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| å¿«é€Ÿå¼€å§‹ | æœ€ç®€å•çš„ä½¿ç”¨ç¤ºä¾‹ | âš ï¸ ç¼ºå¤± |
| åˆ›å»º Agent | Agent CRUD æ“ä½œ | âš ï¸ ç¼ºå¤± |
| å¯¹è¯ç¤ºä¾‹ | ä¸ Agent å¯¹è¯ | âš ï¸ ç¼ºå¤± |
| å·¥å…·è°ƒç”¨ | ä½¿ç”¨ Tools | âš ï¸ ç¼ºå¤± |
| MCP é›†æˆ | MCP æœåŠ¡å™¨é›†æˆ | âš ï¸ ç¼ºå¤± |

---

## ç¤ºä¾‹å†…å®¹

### 1. å¿«é€Ÿå¼€å§‹

```markdown
# å¿«é€Ÿå¼€å§‹

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºå¦‚ä½•åœ¨ 5 åˆ†é’Ÿå†…å¼€å§‹ä½¿ç”¨ Semibotã€‚

## 1. å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-org/semibot.git
cd semibot

# å®‰è£…ä¾èµ–
pnpm install

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½® DATABASE_URL, REDIS_URL, JWT_SECRET, OPENAI_API_KEY

# å¯åŠ¨æœåŠ¡
pnpm dev
```

## 2. æ³¨å†Œè´¦å·

```bash
curl -X POST http://localhost:3001/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "password": "password123",
    "name": "Test User",
    "orgName": "Test Org"
  }'
```

å“åº”ï¼š
```json
{
  "success": true,
  "data": {
    "accessToken": "eyJhbGciOiJIUzI1NiIs...",
    "refreshToken": "...",
    "user": {
      "id": "user-id",
      "email": "user@example.com",
      "name": "Test User"
    }
  }
}
```

## 3. åˆ›å»º Agent

```bash
curl -X POST http://localhost:3001/api/v1/agents \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "name": "My First Agent",
    "description": "A helpful assistant",
    "systemPrompt": "You are a helpful assistant."
  }'
```

## 4. å¼€å§‹å¯¹è¯

```bash
# åˆ›å»ºä¼šè¯
curl -X POST http://localhost:3001/api/v1/sessions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "agentId": "AGENT_ID"
  }'

# å‘é€æ¶ˆæ¯
curl -X POST http://localhost:3001/api/v1/sessions/SESSION_ID/messages \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "content": "Hello, how are you?"
  }'
```

## 5. è®¿é—® Web ç•Œé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`ï¼Œä½¿ç”¨æ³¨å†Œçš„è´¦å·ç™»å½•ã€‚
```

### 2. åˆ›å»º Agent ç¤ºä¾‹

```typescript
// examples/create-agent.ts

import axios from 'axios'

const API_URL = 'http://localhost:3001/api/v1'

async function main() {
  // 1. ç™»å½•è·å– Token
  const loginResponse = await axios.post(`${API_URL}/auth/login`, {
    email: 'user@example.com',
    password: 'password123'
  })

  const token = loginResponse.data.data.accessToken
  const headers = { Authorization: `Bearer ${token}` }

  // 2. åˆ›å»º Agent
  const agentResponse = await axios.post(
    `${API_URL}/agents`,
    {
      name: 'Customer Support Agent',
      description: 'An agent that helps with customer inquiries',
      systemPrompt: `You are a customer support agent for our company.
Be helpful, friendly, and professional.
If you don't know the answer, say so and offer to escalate.`,
      modelConfig: {
        provider: 'openai',
        model: 'gpt-4',
        temperature: 0.7,
        maxTokens: 2000
      }
    },
    { headers }
  )

  console.log('Agent created:', agentResponse.data.data)

  // 3. è·å– Agent åˆ—è¡¨
  const listResponse = await axios.get(`${API_URL}/agents`, { headers })
  console.log('Agents:', listResponse.data.data)

  // 4. æ›´æ–° Agent
  const agentId = agentResponse.data.data.id
  const updateResponse = await axios.put(
    `${API_URL}/agents/${agentId}`,
    {
      description: 'Updated description',
      version: agentResponse.data.data.version
    },
    { headers }
  )

  console.log('Agent updated:', updateResponse.data.data)

  // 5. åˆ é™¤ Agent
  // await axios.delete(`${API_URL}/agents/${agentId}`, { headers })
  // console.log('Agent deleted')
}

main().catch(console.error)
```

### 3. å¯¹è¯ç¤ºä¾‹

```typescript
// examples/chat.ts

import axios from 'axios'
import { EventSource } from 'eventsource'

const API_URL = 'http://localhost:3001/api/v1'

async function main() {
  // 1. ç™»å½•
  const loginResponse = await axios.post(`${API_URL}/auth/login`, {
    email: 'user@example.com',
    password: 'password123'
  })

  const token = loginResponse.data.data.accessToken
  const headers = { Authorization: `Bearer ${token}` }

  // 2. è·å– Agent
  const agentsResponse = await axios.get(`${API_URL}/agents`, { headers })
  const agent = agentsResponse.data.data[0]

  if (!agent) {
    console.log('No agents found. Please create one first.')
    return
  }

  // 3. åˆ›å»ºä¼šè¯
  const sessionResponse = await axios.post(
    `${API_URL}/sessions`,
    { agentId: agent.id },
    { headers }
  )

  const sessionId = sessionResponse.data.data.id
  console.log('Session created:', sessionId)

  // 4. å‘é€æ¶ˆæ¯å¹¶æ¥æ”¶æµå¼å“åº”
  console.log('\n--- Chat Session ---\n')

  const messages = [
    'Hello! Can you help me with my order?',
    'I ordered a laptop 3 days ago but haven\'t received it yet.',
    'The order number is #12345'
  ]

  for (const message of messages) {
    console.log(`User: ${message}`)

    // å‘é€æ¶ˆæ¯
    await axios.post(
      `${API_URL}/sessions/${sessionId}/messages`,
      { content: message },
      { headers }
    )

    // æ¥æ”¶æµå¼å“åº”
    const response = await receiveStreamResponse(sessionId, token)
    console.log(`Assistant: ${response}\n`)
  }
}

async function receiveStreamResponse(sessionId: string, token: string): Promise<string> {
  return new Promise((resolve, reject) => {
    const eventSource = new EventSource(
      `${API_URL}/sessions/${sessionId}/stream`,
      {
        headers: { Authorization: `Bearer ${token}` }
      }
    )

    let fullResponse = ''

    eventSource.onmessage = (event) => {
      const data = JSON.parse(event.data)

      if (data.type === 'content') {
        fullResponse += data.content
        process.stdout.write(data.content)
      } else if (data.type === 'done') {
        eventSource.close()
        resolve(fullResponse)
      } else if (data.type === 'error') {
        eventSource.close()
        reject(new Error(data.message))
      }
    }

    eventSource.onerror = (error) => {
      eventSource.close()
      reject(error)
    }
  })
}

main().catch(console.error)
```

### 4. å·¥å…·è°ƒç”¨ç¤ºä¾‹

```typescript
// examples/tools.ts

import axios from 'axios'

const API_URL = 'http://localhost:3001/api/v1'

async function main() {
  // ç™»å½•
  const token = await login()
  const headers = { Authorization: `Bearer ${token}` }

  // 1. åˆ›å»ºå·¥å…·
  const toolResponse = await axios.post(
    `${API_URL}/tools`,
    {
      name: 'get_weather',
      description: 'Get current weather for a city',
      parameters: {
        type: 'object',
        properties: {
          city: {
            type: 'string',
            description: 'City name'
          },
          unit: {
            type: 'string',
            enum: ['celsius', 'fahrenheit'],
            default: 'celsius'
          }
        },
        required: ['city']
      },
      handler: {
        type: 'http',
        url: 'https://api.weather.example.com/current',
        method: 'GET',
        params: {
          q: '{{city}}',
          units: '{{unit}}'
        }
      }
    },
    { headers }
  )

  console.log('Tool created:', toolResponse.data.data)

  // 2. åˆ›å»ºä½¿ç”¨å·¥å…·çš„ Agent
  const agentResponse = await axios.post(
    `${API_URL}/agents`,
    {
      name: 'Weather Agent',
      description: 'An agent that can check weather',
      systemPrompt: 'You are a weather assistant. Use the get_weather tool to check weather.',
      tools: [toolResponse.data.data.id]
    },
    { headers }
  )

  console.log('Agent with tool created:', agentResponse.data.data)

  // 3. æµ‹è¯•å¯¹è¯ï¼ˆAgent ä¼šè‡ªåŠ¨è°ƒç”¨å·¥å…·ï¼‰
  const sessionResponse = await axios.post(
    `${API_URL}/sessions`,
    { agentId: agentResponse.data.data.id },
    { headers }
  )

  await axios.post(
    `${API_URL}/sessions/${sessionResponse.data.data.id}/messages`,
    { content: "What's the weather in Shanghai?" },
    { headers }
  )

  // è·å–å“åº”ï¼ˆåŒ…å«å·¥å…·è°ƒç”¨ç»“æœï¼‰
  const messagesResponse = await axios.get(
    `${API_URL}/sessions/${sessionResponse.data.data.id}/messages`,
    { headers }
  )

  console.log('Messages:', messagesResponse.data.data)
}

async function login(): Promise<string> {
  const response = await axios.post(`${API_URL}/auth/login`, {
    email: 'user@example.com',
    password: 'password123'
  })
  return response.data.data.accessToken
}

main().catch(console.error)
```

### 5. Python SDK ç¤ºä¾‹

```python
# examples/python_sdk.py

from semibot import Semibot, Agent

# åˆå§‹åŒ–å®¢æˆ·ç«¯
client = Semibot(
    api_url="http://localhost:3001",
    api_key="your-api-key"
)

# åˆ›å»º Agent
agent = client.agents.create(
    name="Python Agent",
    description="Created from Python SDK",
    system_prompt="You are a helpful assistant."
)

print(f"Agent created: {agent.id}")

# åˆ›å»ºä¼šè¯
session = client.sessions.create(agent_id=agent.id)

# å‘é€æ¶ˆæ¯
response = client.messages.create(
    session_id=session.id,
    content="Hello from Python!"
)

print(f"Response: {response.content}")

# æµå¼å“åº”
for chunk in client.messages.stream(
    session_id=session.id,
    content="Tell me a joke"
):
    print(chunk.content, end="", flush=True)

print()
```

---

## ç›®å½•ç»“æ„

```
docs/examples/
â”œâ”€â”€ README.md              # ç¤ºä¾‹ç´¢å¼•
â”œâ”€â”€ quickstart.md          # å¿«é€Ÿå¼€å§‹
â”œâ”€â”€ create-agent.ts        # åˆ›å»º Agent
â”œâ”€â”€ chat.ts                # å¯¹è¯ç¤ºä¾‹
â”œâ”€â”€ tools.ts               # å·¥å…·è°ƒç”¨
â”œâ”€â”€ mcp-integration.ts     # MCP é›†æˆ
â”œâ”€â”€ python/
â”‚   â”œâ”€â”€ quickstart.py
â”‚   â”œâ”€â”€ chat.py
â”‚   â””â”€â”€ tools.py
â””â”€â”€ curl/
    â”œâ”€â”€ auth.sh
    â”œâ”€â”€ agents.sh
    â””â”€â”€ chat.sh
```

---

## ä¿®å¤æ¸…å•

### æ–‡æ¡£åˆ›å»º
- [ ] åˆ›å»º `docs/examples/` ç›®å½•
- [ ] åˆ›å»º `docs/examples/README.md`
- [ ] åˆ›å»º `docs/examples/quickstart.md`

### ç¤ºä¾‹ä»£ç 
- [ ] `examples/create-agent.ts`
- [ ] `examples/chat.ts`
- [ ] `examples/tools.ts`
- [ ] `examples/mcp-integration.ts`
- [ ] `examples/python/` ç›®å½•

### curl ç¤ºä¾‹
- [ ] `examples/curl/auth.sh`
- [ ] `examples/curl/agents.sh`
- [ ] `examples/curl/chat.sh`

---

## å®Œæˆæ ‡å‡†

- [ ] æ‰€æœ‰ç¤ºä¾‹å¯è¿è¡Œ
- [ ] ç¤ºä¾‹ä»£ç æœ‰æ³¨é‡Š
- [ ] ç¤ºä¾‹è¦†ç›–ä¸»è¦åŠŸèƒ½
- [ ] ä»£ç å®¡æŸ¥é€šè¿‡

---

## ç›¸å…³æ–‡æ¡£

- [API æ–‡æ¡£](docs/api/README.md)
- [å¼€å‘æŒ‡å—](docs/development/README.md)
