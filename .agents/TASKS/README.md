# Semibot 项目审查任务清单

**生成时间**: 2026-02-09
**任务总数**: 35 个
**预估总工时**: 180-230 小时（23-30 天）

---

## 🔴 P0 - 严重问题（10个，必须立即修复）

| 编号 | 任务名称 | 文件 | 预估工时 | 状态 |
|------|---------|------|----------|------|
| 01 | 统一日志使用 | `01-编码规范-统一日志使用.md` | 4-6h | ⬜ 待处理 |
| 02 | 消除硬编码 | `02-编码规范-消除硬编码.md` | 3-4h | ⬜ 待处理 |
| 03 | 多租户隔离修复 | `03-安全规范-多租户隔离修复.md` | 2-3h | ⬜ 待处理 |
| 04 | 统一软删除 | `04-数据库规范-统一软删除.md` | 2-3h | ⬜ 待处理 |
| 05 | 禁用物理删除 | `05-数据库规范-禁用物理删除.md` | 1-2h | ⬜ 待处理 |
| 06 | 修复竞态条件 | `06-并发规范-修复竞态条件.md` | 0.5-1h | ⬜ 待处理 |
| 07 | 清理调试代码 | `07-代码质量-清理调试代码.md` | 1-2h | ⬜ 待处理 |
| 08 | Sandbox模块测试 | `08-测试覆盖-Sandbox模块测试.md` | 3-5天 | ⬜ 待处理 |
| 09 | Repository层测试 | `09-测试覆盖-Repository层测试.md` | 3-4天 | ⬜ 待处理 |
| 10 | 创建根README | `10-文档完整-创建根README.md` | 1-2h | ⬜ 待处理 |

**P0 小计**: 80-100 小时（10-13 天）

---

## 🟡 P1 - 高优先级（15个，近期完成）

| 编号 | 任务名称 | 预估工时 | 状态 |
|------|---------|----------|------|
| 11 | 边界日志补充 | 2-3h | ⬜ 待处理 |
| 12 | 组织级SSE限制 | 1-2h | ⬜ 待处理 |
| 13 | 修复snake_case字段 | 0.5-1h | ⬜ 待处理 |
| 14 | 审计字段使用 | 2-3h | ⬜ 待处理 |
| 15 | 乐观锁实现 | 2-3h | ⬜ 待处理 |
| 16 | MCP资源清理 | 1-2h | ⬜ 待处理 |
| 17 | 常量定义规范化 | 2-3h | ⬜ 待处理 |
| 18 | 优化N+1查询 | 2-3h | ⬜ 待处理 |
| 19 | 统一Repository实现 | 2-3h | ⬜ 待处理 |
| 20 | MCP模块测试 | 2-3天 | ⬜ 待处理 |
| 21 | Middleware测试 | 2-3天 | ⬜ 待处理 |
| 22 | 前端页面测试 | 4-5天 | ⬜ 待处理 |
| 23 | 子模块README | 2-3h | ⬜ 待处理 |
| 24 | 贡献指南 | 1-2h | ⬜ 待处理 |
| 25 | OpenAPI规范 | 2-3h | ⬜ 待处理 |

**P1 小计**: 60-80 小时（8-10 天）

---

## 🟢 P2 - 中优先级（10个，逐步改进）

| 编号 | 任务名称 | 预估工时 | 状态 |
|------|---------|----------|------|
| 26 | 错误处理统一 | 1-2h | ⬜ 待处理 |
| 27 | Tool/Skill org_id验证 | 2-3h | ⬜ 待处理 |
| 28 | 类型定义去重 | 1-2h | ⬜ 待处理 |
| 29 | Executor职责明确 | 2-3h | ⬜ 待处理 |
| 30 | LLM Provider测试 | 2-3天 | ⬜ 待处理 |
| 31 | 前端业务组件测试 | 3-4天 | ⬜ 待处理 |
| 32 | 未测试Services | 2-3天 | ⬜ 待处理 |
| 33 | 部署文档完善 | 2-3h | ⬜ 待处理 |
| 34 | 示例代码 | 3-4h | ⬜ 待处理 |
| 35 | CHANGELOG | 1-2h | ⬜ 待处理 |

**P2 小计**: 40-50 小时（5-7 天）

---

## 📊 进度追踪

### 总体进度
- **已完成**: 0 / 35 (0%)
- **进行中**: 0 / 35 (0%)
- **待处理**: 35 / 35 (100%)

### 按优先级
- **P0 严重**: 0 / 10 (0%)
- **P1 高优先级**: 0 / 15 (0%)
- **P2 中优先级**: 0 / 10 (0%)

### 按类型
- **编码规范**: 0 / 5 (0%)
- **安全规范**: 0 / 4 (0%)
- **API规范**: 0 / 2 (0%)
- **数据库规范**: 0 / 4 (0%)
- **并发规范**: 0 / 2 (0%)
- **代码质量**: 0 / 5 (0%)
- **测试覆盖**: 0 / 8 (0%)
- **文档完整**: 0 / 5 (0%)

---

## 🎯 建议实施顺序

### 第一周（安全和规范）
1. ✅ 多租户隔离修复（P0-03）- 2-3h
2. ✅ 修复竞态条件（P0-06）- 0.5-1h
3. ✅ 统一软删除（P0-04）- 2-3h
4. ✅ 禁用物理删除（P0-05）- 1-2h
5. ✅ 统一日志使用（P0-01）- 4-6h
6. ✅ 消除硬编码（P0-02）- 3-4h
7. ✅ 清理调试代码（P0-07）- 1-2h
8. ✅ 创建根README（P0-10）- 1-2h

**第一周小计**: 约 15-23 小时

### 第二周（测试补充 - 关键模块）
1. ✅ Sandbox模块测试（P0-08）- 3-5天
2. ✅ Repository层测试（P0-09）- 3-4天

**第二周小计**: 约 40-50 小时

### 第三周（测试补充 - 其他模块）
1. ✅ MCP模块测试（P1-20）- 2-3天
2. ✅ Middleware测试（P1-21）- 2-3天

**第三周小计**: 约 30-40 小时

### 第四周（代码质量和文档）
1. ✅ 常量定义规范化（P1-17）- 2-3h
2. ✅ 优化N+1查询（P1-18）- 2-3h
3. ✅ 统一Repository实现（P1-19）- 2-3h
4. ✅ 子模块README（P1-23）- 2-3h
5. ✅ 贡献指南（P1-24）- 1-2h
6. ✅ OpenAPI规范（P1-25）- 2-3h
7. ✅ 边界日志补充（P1-11）- 2-3h
8. ✅ 组织级SSE限制（P1-12）- 1-2h

**第四周小计**: 约 14-22 小时

---

## 📈 关键指标改善目标

| 指标 | 当前值 | 目标值 | 改善幅度 |
|------|--------|--------|----------|
| 编码规范合规率 | 65% | 90%+ | +25% |
| 安全规范合规率 | 82% | 95%+ | +13% |
| 数据库规范合规率 | 65% | 90%+ | +25% |
| 测试覆盖率（整体） | 60% | 80%+ | +20% |
| 文档完整性 | 75% | 90%+ | +15% |
| **综合评分** | **76.5** | **90+** | **+13.5** |

---

## 📝 使用说明

### 更新任务状态
在对应的任务文件中更新状态：
- ⬜ 待处理
- 🔄 进行中
- ✅ 已完成
- ❌ 已取消

### 添加新任务
1. 在 `.agents/TASKS/` 目录创建新的 Markdown 文件
2. 使用编号格式：`XX-类型-任务名称.md`
3. 更新本索引文件

### 任务模板
```markdown
# 任务：[任务名称]

**优先级**: 🔴/🟡/🟢 P0/P1/P2
**类型**: [编码规范/安全规范/...]
**预估工时**: X-Y 小时
**影响范围**: X 个文件

---

## 问题描述
...

## 修复步骤
...

## 完成标准
- [ ] ...
```

---

## 🔗 相关文档

- [审查总结](00-审查总结.md)
- [编码规范](.claude/rules/coding-standards.md)
- [安全规范](.claude/rules/security.md)
- [API规范](.claude/rules/api-standards.md)
- [数据库规范](.claude/rules/database.md)
- [并发规范](.claude/rules/concurrency.md)

---

**最后更新**: 2026-02-09
