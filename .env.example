# =============================================================================
# Semibot Environment Variables
# Copy this file to .env.local and fill in the values
# =============================================================================

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
# PostgreSQL (required for Docker Compose)
POSTGRES_USER="semibot"
POSTGRES_PASSWORD="your-strong-postgres-password-here"
POSTGRES_DB="semibot"
POSTGRES_PORT="5432"

# Database connection URL
DATABASE_URL="postgresql://semibot:your-strong-postgres-password-here@localhost:5432/semibot"

# Redis (required for Docker Compose)
REDIS_PASSWORD="your-strong-redis-password-here"
REDIS_PORT="6379"
REDIS_URL="redis://:your-strong-redis-password-here@localhost:6379"

# -----------------------------------------------------------------------------
# Authentication
# -----------------------------------------------------------------------------
# JWT secret for signing tokens (generate with: openssl rand -base64 32)
JWT_SECRET="your-jwt-secret-here"
# Session secret for cookie encryption
SESSION_SECRET="your-session-secret-here"

# -----------------------------------------------------------------------------
# LLM Providers
# -----------------------------------------------------------------------------
# OpenAI
OPENAI_API_KEY=""
OPENAI_API_BASE_URL=""  # Optional: Custom endpoint (e.g., https://api.openai.com/v1)
OPENAI_ORG_ID=""

# Anthropic
ANTHROPIC_API_KEY=""
ANTHROPIC_API_BASE_URL=""  # Optional: Custom endpoint (e.g., https://api.anthropic.com)

# Google AI
GOOGLE_AI_API_KEY=""
GOOGLE_AI_API_BASE_URL=""  # Optional: Custom endpoint

# Azure OpenAI
AZURE_OPENAI_API_KEY=""
AZURE_OPENAI_API_BASE_URL=""  # Required: Azure endpoint (e.g., https://your-resource.openai.azure.com)
AZURE_OPENAI_API_VERSION=""  # API version (e.g., 2024-02-15-preview)
AZURE_OPENAI_DEPLOYMENT_NAME=""  # Deployment name

# 兼容 OpenAI API 的第三方服务 (如 DeepSeek, 智谱, 月之暗面等)
CUSTOM_LLM_API_KEY=""
CUSTOM_LLM_API_BASE_URL=""  # Custom endpoint (e.g., https://api.deepseek.com/v1)

# -----------------------------------------------------------------------------
# External Services
# -----------------------------------------------------------------------------
# Supabase (if using)
SUPABASE_URL=""
SUPABASE_ANON_KEY=""
SUPABASE_SERVICE_ROLE_KEY=""

# Upstash Redis (if using)
UPSTASH_REDIS_REST_URL=""
UPSTASH_REDIS_REST_TOKEN=""

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
# Node environment: development | production | test
NODE_ENV="development"

# 前端应用地址（仅 Playwright E2E 测试使用，作为 baseURL）
NEXT_PUBLIC_APP_URL="http://localhost:3000"
# 浏览器端直连后端 API 地址（前端 api.ts、SSE 流式请求使用，绕过 Next.js proxy 避免缓冲）
NEXT_PUBLIC_API_URL="http://localhost:3001/api/v1"
# Next.js 服务端到后端的内网地址（next.config.js rewrites 代理、服务端 API 调用；部署时可用 Docker 内网如 http://api:3001）
API_INTERNAL_URL="http://localhost:3001"
# 后端生成面向用户的前端链接（如邮件中的重置密码 URL）
WEB_BASE_URL="http://localhost:3000"

# -----------------------------------------------------------------------------
# Runtime Orchestrator
# -----------------------------------------------------------------------------
# Runtime service URL (Python orchestrator)
RUNTIME_URL="http://localhost:8801"

# Runtime timeout threshold in milliseconds
CHAT_RUNTIME_TIMEOUT_THRESHOLD_MS="300000"

# Runtime error rate threshold (0-1, triggers alert if exceeded)
CHAT_RUNTIME_ERROR_RATE_THRESHOLD="0.5"

# -----------------------------------------------------------------------------
# Observability
# -----------------------------------------------------------------------------
# Sentry DSN for error tracking
SENTRY_DSN=""

# Log level: debug | info | warn | error
LOG_LEVEL="info"

# -----------------------------------------------------------------------------
# Skills Management
# -----------------------------------------------------------------------------
# Skill package storage path
SKILL_STORAGE_PATH="/var/lib/semibot/skills"

# Maximum skill package size in MB
SKILL_MAX_SIZE_MB="100"

# Maximum concurrent skill installations
SKILL_MAX_CONCURRENT_INSTALLS="50"

# Anthropic Skills catalog URL (optional)
ANTHROPIC_SKILLS_CATALOG_URL=""
